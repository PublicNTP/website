!function(e){function t(e){var t=new Date,n=t.getFullYear(),r=t.getMonth()+1,a=e.split("/"),s=parseInt(a[1],10)+2e3,o=parseInt(a[0],10);if(s<n||s==n&&o<r)return i+="The expiry date has passed.\n",!0}function n(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.toLowerCase())}function r(){e("input[name=first_name]").val(""),e("input[name=last_name]").val(""),e("input[name=email]").val(""),e("input[name=address]").val(""),e("input[name=line_2]").val(""),e("input[name=city]").val(""),e("input[name=state]").val(""),e("input[name=zip]").val(""),e("input[name=card_number]").val(""),e("input[name=ccv]").val(""),e("input[name=expiration]").val(""),e("#firstNameError").text(""),e("#lastNameError").text(""),e("#emailError").text(""),e("#addressError").text(""),e("#cityError").text(""),e("#stateError").text(""),e("#zipcodeError").text(""),e("#cvvError").text(""),e("#donation-processing").text(""),e(".donate__input").val("")}var a;e.ajax({dataType:"jsonp",url:"https://freegeoip.net/json",success:function(e){a=e.country_code,setTimeout(function(){document.querySelector('.donate__country option[value="'+a+'"]').selected=!0},1e3)},error:function(e){}});var i="";e("input[name=first_name]").blur(function(){var t=e("input[name=first_name]").val();e(this).next().removeClass("red"),""!=t&&null!=t||(i="First name is required",e(this).next().addClass("red"),e("#firstNameError").text(i),setTimeout(function(){e("#firstNameError").text(""),i=""},5e3))}),e("input[name=last_name]").blur(function(){var t=e("input[name=last_name]").val();if(e(this).next().removeClass("red"),""===t||null==t)return i="Last name is required",e(this).next().addClass("red"),e("#lastNameError").text(i),setTimeout(function(){e("#lastNameError").text(""),i=""},5e3)}),e("input[name=email]").blur(function(){var t=e("input[name=email]").val();if(e(this).next().removeClass("red"),""==t||!n(t))return i="Valid email address is required",e(this).next().addClass("red"),e("#emailError").text(i),setTimeout(function(){e("#emailError").text(""),i=""},5e3)}),e("input[name=address]").blur(function(){var t=e("input[name=address]").val();if(e(this).next().removeClass("red"),""==t||null==t)return i="Address is required",e(this).next().addClass("red"),e("#addressError").text(i),setTimeout(function(){e("#addressError").text(""),i=""},5e3)}),e("input[name=city]").blur(function(){var t=e("input[name=city]").val();if(e(this).next().removeClass("red"),""==t||null==t)return i="City is required",e(this).next().addClass("red"),e("#cityError").text(i),setTimeout(function(){e("#cityError").text(""),i=""},5e3)}),e("input[name=state]").blur(function(){var t=e("input[name=state]").val();if(e(this).next().removeClass("red"),""==t||null==t)return i="State / Province / Region is required",e(this).next().addClass("red"),e("#stateError").text(i),setTimeout(function(){e("#stateError").text(""),i=""},5e3)}),e("input[name=zip]").blur(function(){var t=e("input[name=zip]").val();if(e(this).next().removeClass("red"),""==t||null==t)return i="ZIP / Postal Code is required",e(this).next().addClass("red"),e("#zipcodeError").text(i),setTimeout(function(){e("#zipcodeError").text(""),i=""},5e3)}),e("input[name=card_number]").blur(function(){var t=e("input[name=card_number]").val();if(e(this).next().removeClass("red"),""==t||null==t)return i="Card Number is required",e(this).next().addClass("red"),e("#creditCardError").text(i),setTimeout(function(){e("#creditCardError").text(""),i=""},5e3)}),e("input[name=ccv]").blur(function(){var t=e("input[name=ccv]").val();if(e(this).next().removeClass("red"),""==t||null==t)return i="CVV is required",e(this).next().addClass("red"),e("#cvvError").text(i),setTimeout(function(){e("#cvvError").text(""),i=""},5e3)}),e("input[name=expiration]").blur(function(){var n=e("input[name=expiration]").val();if(e(this).next().removeClass("red"),""==n||null==n||t(n))return i="Valid Expiration required",e(this).next().addClass("red"),e("#expirationError").text(i),setTimeout(function(){e("#expirationError").text(""),i=""},5e3)});var s=(new Cleave("#donateInput",{numeral:!0,prefix:"$"}),500),o=!1;e("#select-value").change(function(){var t="";e("#select-value option:selected").each(function(){t+=e(this).text(),"Enter a value"!==t&&(t=100*parseFloat(t.substr(1)),s=t,e(".donate__button--submit").text("Donate $"+(t/100).toFixed(2))),"Enter a value"==t&&(o=!0,e(".donate__input").val(""),e(".donate__button--submit").text("Donate $0.00"),e(".select-style").css("display","none"),e(".donate__input").css("display","inline-block"),e(".donate__underline").removeClass("hide"),e(".donate__cash").removeClass("hide"))})}),e(".donate__input").dblclick(function(){e(".donate__button--submit").text("Donate $0.00"),e(".donate__cash").addClass("hide"),e(".donate__input").css("display","none"),e(".select-style").css("display","inline"),e(".donate__underline").addClass("hide")}),e(".donate__input").keyup(function(t){var n=e(".donate__input").val().replace(/\$|,/g,""),r=parseFloat(n);s=100*r,r>=0?e(".donate__button--submit").text("Donate $"+r.toFixed(2)):e(".donate__button--submit").text("Donate $0.00")}),e(".connect__input").focus(function(){e(e(this).siblings("label")[0]).addClass("connect__label--focused")});var u=Stripe("pk_test_hagCUEZIKkraUVhbV6gnNbB4"),d=u.elements(),l={base:{lineHeight:"18px",fontFamily:'"Roboto", sans-serif',fontWeight:"500",fontSize:"14px","::placeholder":{color:"#9b9b9b"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},c=d.create("card",{style:l});c.mount("#card-element"),c.addEventListener("change",function(e){var t=document.getElementById("card-errors");e.error?t.textContent=e.error.message:t.textContent=""}),e(".donate__button--submit").click(function(){function t(t,n){e.ajax({url:"https://api.publicntp.org/v1/payment/request",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(n),success:function(t){"succeeded"===t.status&&swal("Donation Sent","Thank you for your $"+(s/100).toFixed(2)+" donation!","success").then(function(){r(),c.clear()}),"succeeded"!==t.status&&(swal("Oops...",t.message,"error"),e("#donation-processing").text(""))},error:function(t){swal("Oops...","Something went wrong!","error"),e("#donation-processing").text("Error occured: "+f),setTimeout(function(){e("#donation-processing").text("")},3e3)}})}e("#error-message").text("");var a=e("input[name=first_name]").val(),i=e("input[name=last_name]").val(),o=e("input[name=email]").val(),d=e("input[name=address]").val(),l=e("input[name=line_2]").val(),m=e("input[name=city]").val(),p=e("input[name=state]").val(),x=e(".donate__country option:selected").val(),v=e("input[name=zip]").val(),_="",f=!1;if(""!=a&&null!=a||(f=!0,_="First name is required",e("#firstNameError").text(_),setTimeout(function(){e("#firstNameError").text(""),e(".donate__processing").text("")},5e3)),""!=i&&null!=i||(f=!0,_="Last name is required",e("#lastNameError").text(_),setTimeout(function(){e("#lastNameError").text(""),e(".donate__processing").text("")},5e3)),""!=o&&n(o)||(f=!0,_="Valid email address is required",e("#emailError").text(_),setTimeout(function(){e("#emailError").text(""),e(".donate__processing").text("")},5e3)),""!=d&&null!=d||(f=!0,_="Address is required",e("#addressError").text(_),setTimeout(function(){e("#addressError").text(""),e(".donate__processing").text("")},5e3)),""!=m&&null!=m||(f=!0,_="City is required",e("#cityError").text(_),setTimeout(function(){e("#cityError").text(""),e(".donate__processing").text("")},5e3)),""!=p&&null!=p||(f=!0,_="State is required",e("#stateError").text(_),setTimeout(function(){e("#stateError").text(""),e(".donate__processing").text("")},5e3)),""!=v&&null!=v||(f=!0,_="Zip Code is required",e("#zipcodeError").text(_),setTimeout(function(){e("#zipcodeError").text(""),e(".donate__processing").text("")},5e3)),!f){e("#donation-processing").text("Processing donation");var h={name:a+" "+i,address_line1:d,address_line2:l,address_city:m,address_zip:v,address_state:p,address_country:x};u.createToken(c,h).then(function(e){if(e.error){document.getElementById("card-errors").textContent=e.error.message}else{var n={payment_info:{stripe_key:"test",amount:s,currency:"usd",source:e.token.id,description:"Test Donation",receipt_email:o}};t(e.token,n)}})}}),e.getJSON("https://raw.githubusercontent.com/umpirsky/country-list/master/data/en_US/country.json",function(t){e.each(t,function(t,n){e(".donate__country").append("<option value='"+t+"'>"+n+"</option>")})})}(jQuery);